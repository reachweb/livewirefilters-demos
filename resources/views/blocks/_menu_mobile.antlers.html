<div x-data="{ open: false }" class="flex items-center">
    <!-- Mobile Menu Button -->
    <button
        @click="open = true"
        type="button"
        class="flex items-center justify-center p-2 rounded-md text-main hover:text-alt hover:bg-gray-100 transition-colors duration-200"
        aria-label="Open menu"
    >
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
    </button>

    <!-- Overlay -->
    <div
        x-show="open"
        x-cloak
        @click="open = false"
        x-transition:enter="transition-opacity ease-out duration-300"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        x-transition:leave="transition-opacity ease-in duration-200"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
        class="fixed inset-0 bg-black/50 z-40"
        aria-hidden="true"
    ></div>

    <!-- Offcanvas Menu -->
    <div
        x-show="open"
        x-cloak
        @click.away="open = false"
        x-transition:enter="transition ease-out duration-300 transform"
        x-transition:enter-start="translate-x-full"
        x-transition:enter-end="translate-x-0"
        x-transition:leave="transition ease-in duration-200 transform"
        x-transition:leave-start="translate-x-0"
        x-transition:leave-end="translate-x-full"
        class="fixed inset-y-0 right-0 w-80 max-w-[85vw] bg-white shadow-2xl z-50 flex flex-col h-screen"
        role="dialog"
        aria-modal="true"
        aria-labelledby="mobile-menu-title"
    >
        <!-- Header -->
        <div class="flex items-center justify-between p-4 border-b border-gray-200">
            <h2 id="mobile-menu-title" class="text-lg font-semibold text-main">Menu</h2>
            <button
                @click="open = false"
                type="button"
                class="p-2 rounded-md text-gray-500 hover:text-main hover:bg-gray-100 transition-colors duration-200"
                aria-label="Close menu"
            >
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <!-- Navigation Links -->
        <nav aria-label="Mobile navigation" class="flex-1 overflow-y-auto">
            <ul role="menubar" class="py-4">
                {{ nav:main }}
                    <li role="none">
                        <a
                            href="{{ url }}"
                            @click="open = false"
                            role="menuitem"
                            class="block px-6 py-3 text-main hover:bg-gray-50 hover:text-alt transition-colors duration-200 {{ if is_current }}bg-gray-100 font-bold border-l-4 border-main{{ /if }}"
                            {{ if is_current }}
                            aria-current="page"
                            {{ /if }}
                        >
                            {{ title }}
                        </a>
                    </li>
                {{ /nav:main }}
            </ul>
        </nav>

        <!-- Footer Link -->
        <div class="p-4 border-t border-gray-200">
            <a
                href="https://livewirefilters.com"
                @click="open = false"
                title="Go back to livewirefilters.com"
                class="flex items-center justify-center rounded-sm border border-main text-main p-3 transition duration-200 hover:bg-main hover:text-white"
            >
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3" />
                </svg>
                <span class="font-medium ml-3">Return to the docs</span>
            </a>
        </div>
    </div>
</div>
